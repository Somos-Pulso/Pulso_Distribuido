# CDU005. Gerenciar Escala

- **Ator principal**: Líder de Escala
- **Atores secundários**: Sistema
- **Resumo**: Permite ao líder de escala criar e gerenciar escalas médicas, inserindo dados básicos e escolhendo se deseja reutilizar uma escala modelo (template) ou iniciar uma escala vazia. Após a criação, é possível editar ou excluir a escala conforme regras de negócio.
- **Pré-condição**: O líder de escala deve estar autenticado no sistema.
- **Pós-condição**: Uma nova escala é criada, pronta para edição e gerenciamento.

## Fluxo Principal

|                                             Ações do ator                                            |                                                             Ações do sistema                                                             |
| :--------------------------------------------------------------------------------------------------: | :--------------------------------------------------------------------------------------------------------------------------------------: |
|                                   1 - Acessa a opção “Criar Escala”                                  |                                                                                                                                          |
|                                                                                                      | 2 - Exibe formulário para criação da escala com campos: nome da escala, mês de referência, especialidade, setor e opção de usar template |
|                        3 - Preenche os dados do formulário e confirma criação                        |                                                                                                                                          |
|                                                                                                      |                                 4 - Recebe os dados informados, valida campos obrigatórios e consistência                                |
|                                                                                                      |         5a - Se escolheu usar um template: cria a nova escala replicando os plantões do template, adaptados ao mês de referência         |
|                                                                                                      |                         5b - Se não escolheu template: cria escala vazia apenas com horários fixos da instituição                        |
|                                                                                                      |                                 6 - Redireciona o líder de escala para a tela de detalhes da nova escala                                 |


## Fluxo Alternativo I - [Editar dados da escala]

|                      Ações do ator                      |                    Ações do sistema                    |
| :-----------------------------------------------------: | :----------------------------------------------------: |
| 1.1 - Na tela de detalhes da escala, seleciona “Editar” |                                                        |
|                                                         |  1.2 - Exibe formulário de edição dos dados da escala  |
|          1.3 - Atualiza as informações e salva          |                                                        |
|                                                         | 1.4 - Sistema valida alterações e salva os novos dados |


## Fluxo Alternativo II - [Excluir escala]

|                       Ações do ator                      |                                      Ações do sistema                                      |
| :------------------------------------------------------: | :----------------------------------------------------------------------------------------: |
| 2.1 - Na tela de detalhes da escala, seleciona “Excluir” |                                                                                            |
|                                                          | 2.2 - Verifica se a escala ainda não foi publicada e não há plantões prestes a serem pagos |
|                                                          |                    2.3 - Remove a escala e confirma exclusão ao usuário                    |



## Fluxo Exceção I - [Falha na validação dos dados]

|                                    Ações do ator                                   |                             Ações do sistema                            |
| :--------------------------------------------------------------------------------: | :---------------------------------------------------------------------: |
| 0.1 - Preenche formulário de criação da escala com dados incorretos ou incompletos |                                                                         |
|                                                                                    | 0.2 - Exibe mensagem de erro destacando os campos inválidos ou ausentes |


## Protótipo

## Diagrama de Interação (Sequência ou Comunicação)



## Diagrama de Classes de Projeto


